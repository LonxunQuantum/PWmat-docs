# 计算能带结构

要完成能带结构计算有两种方式。
**方式一**：点击`组件`→`系统组件`→ 拖拽`自洽计算`、`非自洽计算`组件到工作流区域 → 添加从`结构导入`到`自洽计算`再到`非自洽计算`的连线。
**方式二**：点击`模板`→ `系统模板`→ `电子结构分类`→ 拖拽`能带结构`模板到工作流区域 → 添加从`结构导入`到`能带结构`的连线。

<table><tr>
    <td> 
        <center>
            <img src={require("./images/图片12.png").default} alt="Drawing" width='100%'/>
            <font>方式一</font>
        </center>
    </td>
    <td> 
        <center>
            <img src={require("./images/图片13.png").default} alt="Drawing" width='100%'/>
            <font>方式二</font>
        </center>
    </td>
</tr></table>

全部组件采用默认参数即可提交计算，用户也可以打开组件参数设置配置详细参数。对于自洽计算组件可以设置的参数有 GPU 卡数、是否 k 点并行、赝势类型、泛函类型、截断能、k 点网格等参数。
自洽计算，仅进行一步自洽场迭代计算过程，一般常见说法称之为一个离子步，也即单点能计算。自洽计算确定体系的电荷密度，可以输出总能等信息，不会移动原子。

<img src={require("./images/图片14.png").default} width="100%" />   

对于非自洽计算，在计算能带结构时，Q-Flow 会根据结构自动生成高对称点路径、k 点等参数，无需用户设置，感兴趣的用户可以打开组件参数面板自行查看。
非自洽计算，通常用于计算能带结构，必须输入势函数，通常来自之前的 SCF 计算，此时仅计算非自洽波函数的本征值，不计算总能。

<img src={require("./images/图片15.png").default} width="100%" />   

在工作流计算结果页面，处于正在计算状态的组件会呈现加载状态，运算中的工作流可以停止运算，也可以随时点击查看计算进度。

<img src={require("./images/图片17.png").default} width="100%" />   

计算进度栏内包含一些图表数据，表格内会给出体系的总原子数、电子数、能带数、空间群、对称操作、k 点数、k 点网格、赝势、泛函、截断能、自旋极化计算、总能收敛标准、电荷密度收敛标准、计算总用时。
下方 4 张图分别代表总能变化曲线、总能收敛曲线、电荷密度收敛曲线、电子步用时曲线。

<img src={require("./images/图片18.png").default} width="100%" />   

计算完成后，组件会变为已完成状态，此时可以点击查看计算结果。点击自洽计算结果可以查看总能、费米能、带隙、带隙类型、CBM 本征能量、VBM 本征能量、CBM 位置、VBM 位置、总电荷密度、部分电荷密度。

<img src={require("./images/图片19.png").default} width="100%" />   
根据结果可知使用PBE泛函得到的晶体硅带隙为0.56 eV，带隙类型为间接带隙。

根据 VBM 位置可以画出 VBM 的实空间部分电荷密度。

<img src={require("./images/图片20.png").default} width="100%" />   

点击非自洽计算结果可以查看带隙、带隙类型、CBM 本征能量、VBM 本征能量、CBM 位置、VBM 位置、能带结构图。

<img src={require("./images/图片21.png").default} width="100%" />   

